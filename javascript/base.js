function toggleMobileMenuDisplay(){var e=document.getElementsByClassName("nav-item");if(e[1].classList.contains("mobile-visible")){for(t=1;t<e.length;t++)e[t].classList.remove("mobile-visible");document.getElementById("nav-dropdown-arrow").innerHTML="&#9660;"}else{for(var t=1;t<e.length;t++)e[t].classList.add("mobile-visible");document.getElementById("nav-dropdown-arrow").innerHTML="&#9650;"}}function toggleMoreMenuDisplay(){var e=document.getElementById("more-drop-down"),t=document.getElementById("more-title");e.classList.contains("nav-item-dropdown-mobile-visible")?(e.classList.remove("nav-item-dropdown-mobile-visible"),document.getElementById("more-dropdown-arrow").innerHTML="&#9660;"):(e.classList.add("nav-item-dropdown-mobile-visible"),document.getElementById("more-dropdown-arrow").innerHTML="&#9650;"),t.addEventListener("mouseout",removeFakeHover),t.classList.add("fake-hover")}function removeFakeHover(){document.getElementById("more-title").classList.remove("fake-hover")}function logInteraction(e,t){var n=new XMLHttpRequest;n.open("GET","/ws/log_interaction.php?type="+e+"&url_name="+t,!0),n.send()}var siteSearchFetchTimeout,siteSearchSelected=!1;function suggest(){siteSearchFetchTimeout&&clearTimeout(siteSearchFetchTimeout);var e=document.getElementById("site-search-results-dropdown");e.style.display="none",e.innerHTML="",siteSearchFetchTimeout=setTimeout(function(){suggestFetch()},500)}function suggestFetch(){var e=document.getElementById("site-search-input"),a=document.getElementById("site-search-results-dropdown");if(2<e.value.length){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)try{var e=JSON.parse(d.responseText).items;if(e){for(var t=8<=e.length?8:e.length,n=0;n<t;n++){var o,r;r="resource"==e[n].type?(o=e[n].url_name,"_blank"):"app"!=e[n].type||e[n].url_name?(o="/"+e[n].type+"/"+e[n].url_name,"_self"):(o=e[n].store_url_android,"_blank");var i=document.createElement("li");i.classList.add("header-dropdown-item"),i.onmouseover=function(){addSelected(this)},i.onmouseout=function(){this.classList.remove("header-dropdown-item-selected")};var s=document.createElement("a");s.setAttribute("href",o),s.setAttribute("target",r),"resource"==e[n].type?s.onclick=function(){logInteraction("resource",this.getAttribute("href"))}:"app"!=e[n].type||e[n].url_name||(s.onclick=function(){logInteraction("app",this.getAttribute("href"))}),s.classList.add("header-dropdown-item-text"),s.innerHTML=e[n].title+' <span class="header-dropdown-item-type">'+e[n].type+"</span>",i.appendChild(s),a.appendChild(i)}a.style.display="block"}}catch(e){}},d.open("GET","/ws/site_search.php?search="+e.value,!0),d.send()}}function addSelected(e){for(var t=document.getElementsByClassName("header-dropdown-item"),n=0;n<t.length;n++)t[n].classList.remove("header-dropdown-item-selected");e.classList.add("header-dropdown-item-selected")}function enableSiteSearchArrows(){siteSearchSelected=!0;var e=document.getElementById("site-search-results-dropdown");0<e.innerHTML.length&&(e.style.display="block");for(var t=document.getElementsByClassName("header-dropdown-item"),n=0;n<t.length;n++)t[n].classList.remove("header-dropdown-item-selected")}function disableSiteSearchArrows(){siteSearchSelected=!1}function navigateSiteSearch(e){if(siteSearchSelected){var t=document.getElementsByClassName("header-dropdown-item");if(0<t.length){var n=document.getElementsByClassName("header-dropdown-item-selected")[0];if("38"==(e=e||window.event).keyCode){if(n){var o=n.previousSibling;n.classList.remove("header-dropdown-item-selected"),o?o.classList.add("header-dropdown-item-selected"):document.getElementById("site-search-results-dropdown").style.display="none"}e.stopPropagation(),e.preventDefault()}else if("40"==e.keyCode){if(n){var r=n.nextSibling;n.classList.remove("header-dropdown-item-selected"),r?r.classList.add("header-dropdown-item-selected"):t[0].classList.add("header-dropdown-item-selected")}else document.getElementById("site-search-results-dropdown").style.display="block",t[0].classList.add("header-dropdown-item-selected");e.stopPropagation(),e.preventDefault()}else"13"==e.keyCode&&n&&(n.querySelector("a").click(),e.stopPropagation(),e.preventDefault())}}}function showNavbarGames(e){for(var t=document.getElementsByClassName("nav-item-preview-category"),n=0;n<t.length;n++)t[n].style.display="none";document.getElementsByClassName("nav-item-preview-category")[e].style.display="block"}function entryOpenURL(e,t){e.preventDefault(),logInteraction("app",t),window.open(t,"_blank"),e.stopPropagation()}function entryAddToSite(e,t){e.preventDefault(),window.location.href="/game103games/distribute/"+t+".zip",e.stopPropagation()}function entrySetLinks(){for(var e=document.querySelectorAll(".entry-link[data-type='resource']"),t=0;t<e.length;t++)e[t].onclick=function(){logInteraction(this.getAttribute("data-type"),this.getAttribute("data-url-name"))};var n=document.querySelectorAll(".entry-ios-link, .entry-android-link");for(t=0;t<n.length;t++)n[t].onclick=function(e){entryOpenURL(e,this.getAttribute("data-store-url"))};var o=document.querySelectorAll('.entry-link[data-type="app"]');for(t=0;t<o.length;t++)"_blank"==o[t].getAttribute("target")&&(o[t].onclick=function(e){logInteraction("app",this.getAttribute("href"))});var r=document.querySelectorAll(".entry-distribute-button");for(t=0;t<r.length;t++)r[t].onclick=function(e){entryAddToSite(e,this.parentNode.parentNode.getAttribute("data-url-name"))}}function setCookie(e,t){document.cookie=e+"="+t+"; path=/"}function deleteCookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/"}function setDarkMode(){setCookie("dark",1),document.body.classList.add("dark")}function disableDarkMode(){deleteCookie("dark"),document.body.classList.remove("dark")}function toggleDarkMode(){document.body.classList.contains("dark")?disableDarkMode():setDarkMode()}document.addEventListener("DOMContentLoaded",function(){document.onclick=function(){siteSearchSelected||(document.getElementById("site-search-results-dropdown").style.display="none")},document.onkeydown=function(e){navigateSiteSearch(e)};var e=document.querySelector(".site-search").querySelector("input");e.onfocus=enableSiteSearchArrows,e.onclick=enableSiteSearchArrows,e.onblur=disableSiteSearchArrows,e.oninput=suggest},!1),document.addEventListener("DOMContentLoaded",entrySetLinks,!1),document.addEventListener("DOMContentLoaded",function(){var n;function e(){var i=[].slice.call(document.querySelectorAll(".lazy"));if("IntersectionObserver"in window)n&&n.disconnect(),n=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var t=e.target;t.querySelectorAll("source, img").forEach(function(e){e.src&&(e.src=e.dataset.src),e.srcset&&(e.srcset=e.dataset.srcset)}),t.classList.remove("lazy"),n.unobserve(t)}})}),i.forEach(function(e){n.observe(e)});else{document.removeEventListener("scroll",a),window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a);var s=!1,a=function(){!1===s&&(s=!0,setTimeout(function(){for(var e=0;e<i.length;e++){var t=i[e];if(t.getBoundingClientRect().top<=window.innerHeight&&0<=t.getBoundingClientRect().bottom&&"none"!==getComputedStyle(t).display){for(var n=t.querySelectorAll("source, img"),o=0;o<n.length;o++){var r=n[o];r.src&&(r.src=r.dataset.src),r.srcset&&(r.srcset=r.dataset.srcset)}t.classList.remove("lazy"),0===(i=i.filter(function(e){return e!==t})).length&&(document.removeEventListener("scroll",a),window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a))}}s=!1},200))};document.addEventListener("scroll",a),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),a()}}e(),setInterval(e,100)}),document.addEventListener("DOMContentLoaded",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&(document.querySelector("#games-drop-down .nav-item-preview").innerHTML=e.responseText)},e.open("GET","/navbar-preview.html",!0),e.send()});