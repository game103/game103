function toggleMobileMenuDisplay(){var e=document.getElementsByClassName("nav-item");if(e[1].classList.contains("mobile-visible")){for(t=1;t<e.length;t++)e[t].classList.remove("mobile-visible");document.getElementById("nav-dropdown-arrow").innerHTML="&#9660;"}else{for(var t=1;t<e.length;t++)e[t].classList.add("mobile-visible");document.getElementById("nav-dropdown-arrow").innerHTML="&#9650;"}}function logInteraction(e,t){var s=new XMLHttpRequest;s.open("GET","/ws/log_interaction.php?type="+e+"&url_name="+t,!0),s.send()}function suggest(){siteSearchFetchTimeout&&clearTimeout(siteSearchFetchTimeout);var e=document.getElementById("site-search-results-dropdown");e.style.display="none",e.innerHTML="",siteSearchFetchTimeout=setTimeout(function(){suggestFetch()},500)}function suggestFetch(){var e=document.getElementById("site-search-input"),t=document.getElementById("site-search-results-dropdown");if(e.value.length>2){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status)try{var e=JSON.parse(s.responseText).items;if(e){for(var n=e.length>=8?8:e.length,o=0;o<n;o++){var r,a;"resource"==e[o].type?(r=e[o].url_name,a="_blank"):"app"!=e[o].type||e[o].url_name?(r="/"+e[o].type+"/"+e[o].url_name,a="_self"):(r=e[o].store_url,a="_blank");var d=document.createElement("li");d.classList.add("header-dropdown-item"),d.onmouseover=function(){addSelected(this)},d.onmouseout=function(){this.classList.remove("header-dropdown-item-selected")};var i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("target",a),"resource"==e[o].type&&(i.onclick=function(){logInteraction("resource",this.getAttribute("href"))}),i.classList.add("header-dropdown-item-text"),i.innerHTML=e[o].title+' <span class="header-dropdown-item-type">'+e[o].type+"</span>",d.appendChild(i),t.appendChild(d)}t.style.display="block"}}catch(e){}},s.open("GET","/ws/site_search.php?search="+e.value,!0),s.send()}}function addSelected(e){for(var t=document.getElementsByClassName("header-dropdown-item"),s=0;s<t.length;s++)t[s].classList.remove("header-dropdown-item-selected");e.classList.add("header-dropdown-item-selected")}function enableSiteSearchArrows(){siteSearchSelected=!0;var e=document.getElementById("site-search-results-dropdown");e.innerHTML.length>0&&(e.style.display="block");for(var t=document.getElementsByClassName("header-dropdown-item"),s=0;s<t.length;s++)t[s].classList.remove("header-dropdown-item-selected")}function disableSiteSearchArrows(){siteSearchSelected=!1}function navigateSiteSearch(e){if(siteSearchSelected){var t=document.getElementsByClassName("header-dropdown-item");if(t.length>0){var s=document.getElementsByClassName("header-dropdown-item-selected")[0];if("38"==(e=e||window.event).keyCode){if(s){var n=s.previousSibling;s.classList.remove("header-dropdown-item-selected"),n?n.classList.add("header-dropdown-item-selected"):document.getElementById("site-search-results-dropdown").style.display="none"}e.stopPropagation(),e.preventDefault()}else if("40"==e.keyCode){if(s){var o=s.nextSibling;s.classList.remove("header-dropdown-item-selected"),o?o.classList.add("header-dropdown-item-selected"):t[0].classList.add("header-dropdown-item-selected")}else document.getElementById("site-search-results-dropdown").style.display="block",t[0].classList.add("header-dropdown-item-selected");e.stopPropagation(),e.preventDefault()}else"13"==e.keyCode&&s&&(s.querySelector("a").click(),e.stopPropagation(),e.preventDefault())}}}var siteSearchFetchTimeout,siteSearchSelected=!1;document.addEventListener("DOMContentLoaded",function(){document.onclick=function(){siteSearchSelected||(document.getElementById("site-search-results-dropdown").style.display="none")},document.onkeydown=function(e){navigateSiteSearch(e)};var e=document.querySelector(".site-search").querySelector("input");e.onfocus=enableSiteSearchArrows,e.onclick=enableSiteSearchArrows,e.onblur=disableSiteSearchArrows,e.oninput=suggest},!1);